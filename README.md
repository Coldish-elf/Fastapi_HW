# FastAPI Task Management Application
![Tests](https://github.com/Coldish-elf/Fastapi_HW/actions/workflows/tests.yml/badge.svg)
[![codecov](https://codecov.io/gh/Coldish-elf/Fastapi_HW/branch/main/graph/badge.svg)](https://codecov.io/gh/Coldish-elf/Fastapi_HW)

## Функционал проекта

- **CRUD задачи:**  
  - Создание задач с заголовком, описанием, статусом, приоритетом и датой создания  
  - Просмотр списка задач пользователя  
  - Редактирование и обновление информации о задаче  
  - Удаление задачи

- **Сортировка и поиск:**  
  - Сортировка задач по заголовку, статусу или дате создания  
  - Возможность выбрать топ-N самых приоритетных задач  
  - Реализация поиска по тексту заголовка и описания задач

- **Аутентификация:**  
  - Регистрация пользователя  
  - Получение JWT-токена при входе в систему  
  - Доступ к задачам только для авторизованных пользователей

- **Кэширование:**  
  - Кэширование результатов запроса задач по пользователю и параметрам запросов (сортировка, поиск, топ-N). 

    Было выбрано кешировать именно это, чтобы уменьшить количество запросов к базе данных при повторных запросах с теми же параметрами. Кэшируются данные, которые получают задачи в определённом порядке или фильтрации, что снижает нагрузку на сервер и позволяет быстрее получить результаты.

## Установка и запуск

1. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```
2. Запустите сервер:
   ```bash
   python main.py
   ```

Сервер будет доступен по адресу http://localhost:8000.

## Запуск через Docker Compose

1. Соберите и запустите контейнеры:
   ```bash
   docker-compose up --build
   ```
2. Приложение будет доступно по адресу http://localhost:8000.
---

## Тестирование

### Статус CI/CD

![Tests](https://github.com/Coldish-elf/Fastapi_HW/actions/workflows/tests.yml/badge.svg)

### Покрытие кода

[![codecov](https://codecov.io/gh/Coldish-elf/Fastapi_HW/branch/main/graph/badge.svg)](https://codecov.io/gh/Coldish-elf/Fastapi_HW)

### Запуск тестов
Для запуска тестов выполните команду:
```bash
pytest
```

### Запуск тестов с подробным выводом
Чтобы увидеть подробный вывод тестов, выполните:
```bash
pytest -v
```

### Генерация отчета о покрытии кода
Для проверки покрытия кода выполните:
```bash
pytest --cov=app --cov-report=html
```
После выполнения команды будет создана папка `htmlcov`, содержащая файл `index.html`. Откройте этот файл в браузере, чтобы увидеть визуализацию покрытия кода.
---

## Структура проекта

```
Streamlit_hw\
├── main.py                 # Запуск приложения
├── README.md               
├── requirements.txt        
├── .gitignore              
├── Dockerfile              
├── docker-compose.yml      
├── tasks.db                # БД
└── app\
   ├── app.py               # FastAPI-приложение и маршруты
   ├── models.py            # Модели SQLAlchemy и Pydantic-схемы
   ├── schemas.py           # Модели SQLAlchemy и Pydantic-схемы
   ├── database.py          # Настройка базы данных
   ├── auth.py              # Функции аутентификации и шифрования
└── tests\
   ├── conftest.py          # Фикстуры
   ├── locustfile.py        # Сценарии нагрузочного тестирования
   ├── test_api_tasks.py    # Тесты для задач          (CRUD, сортировка, поискдоступ).
   ├── test_api_users.py    # Тесты для пользователей  (регистрация, авторизация)
   ├── test_auth.py         # Тесты для аутентификации (хэширование паролей, токены)
   ├── test_cache.py        # Тесты для кэширования    (генерация ключей, установка, удаление)
```